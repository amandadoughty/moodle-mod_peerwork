/**
 * Justification character limit.
 *
 * @copyright  2019 Coventry University
 * @author     Frédéric Massart <fred@branchup.tech>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_peerwork/justification-character-limit",["jquery","core/str","core/notification"],(function($,Str,Notification){function updateCharacterLimit(textareaNode,limit){const node=$(textareaNode),remaining=limit-[...node.val()].length,textNode=node.siblings(".justification-character-limit-wrapper").find(".justification-character-limit");textNode.text(M.util.get_string("charactersremaining","mod_peerwork",remaining)),remaining<0?textNode.addClass("text-danger"):textNode.removeClass("text-danger")}return{init:function(selector,limit){limit&&Str.get_string("charactersremaining","mod_peerwork").then((()=>{const textareaNodes=$(selector);return textareaNodes.each((function(i,n){$(n).after('<div class="'.concat("justification-character-limit-wrapper",'"><small class="').concat("justification-character-limit",'"></small></div>')),updateCharacterLimit(n,limit)})),textareaNodes.on("keyup",(function(e){updateCharacterLimit(e.target,limit)})),null})).catch(Notification.exception)}}}));

//# sourceMappingURL=justification-character-limit.min.js.map